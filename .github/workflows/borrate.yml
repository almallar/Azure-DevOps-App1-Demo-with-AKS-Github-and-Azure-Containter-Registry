name: Manual Pipeline Trigger

on:
  push:
    branches:
      - delete-resources
  workflow_dispatch:  # Esto permite desencadenar el flujo de trabajo manualmente desde GitHub

jobs:
  delete-resources:
    runs-on: ubuntu-latest
    steps:
      - name: Delete Azure Container Registry Image
        run: |
          az acr repository delete --name acracks33 --image myimage:${{ github.sha }} --yes

      - name: Delete Kubernetes Resources
        run: |
          kubectl delete -f kube-manifests/01-Deployment-and-LoadBalancer-Service.yml
